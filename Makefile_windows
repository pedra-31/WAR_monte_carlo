# Compilador e flags
GCC := g++
GCCFLAGS := -Wall -Wextra -std=c++17

# Executável de saída
TARGET := build/main.exe

# Lista de todos os .cpp 
SRCS := \
	src/Continente.cpp \
	src/Divisa.cpp \
	src/Territorio.cpp \
	src/War.cpp \
	src/Jogador.cpp \
	src/MonteCarloWar.cpp \
	src/main.cpp
	
# Transforma src/foo.cpp -> bin/foo.o
OBJS := $(SRCS:src/%.cpp=bin/%.o)

all: $(TARGET)

# Gerando o executável a partir dos .o
$(TARGET): $(OBJS)
	if not exist build mkdir build
	$(GCC) $(GCCFLAGS) $(OBJS) -o $(TARGET)

# Compilando .cpp -> .o
bin/%.o: src/%.cpp
	if not exist bin mkdir bin
	$(GCC) $(GCCFLAGS) -c $< -o $@

clean:
	if exist bin rmdir /S /Q bin
	if exist build rmdir /S /Q build

.PHONY: all clean
